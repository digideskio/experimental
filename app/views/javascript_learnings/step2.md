JS.Step2 <small>JavaScriptの基本を知る。</small>
==========================================================

一旦かためなお話です。
chromeのディベロッパーツールを使って、手を動かしながら読んでみてください。


プリミティブとオブジェクト
------------------------------------------------------------
プログラミング言語で扱う値を分類するために、プリミティブ or オブジェクトで区別しておきます。
記憶するものでも無いですが紹介まで。

 型                              | 例
---------------------------------|--------------------------------------
 **プリミティブ** 以下のいずれか |
 Undefined                       | `undefined`
 Null                            | `null`
 Boolean                         | `true / false`
 Number                          | `0, 1, -1, Infinity, ...`
 String                          | `'test'`, `"str123"`
 **オブジェクト** 一例           |
 Array                           | `[]`
 Date                            | `new Date()`
 Function                        | `var a = function() {};`
{: .table}


### オブジェクトの種類
オブジェクトは自分でも定義できますが、ブラウザに存在しているものを例えば、ということで紹介します。

Object
: オブジェクトの親玉的なもの。

Array
: 配列を扱う。
  例) `Array( 1, 2, 3 ) //=> [ 1, 2, 3 ]`

Date
: 日付と時間を扱う。
  例) `new Date().getTimezoneOffset //=> 日本なら -540`

Function
: 関数を扱う。
  例) `var d = new Function( 'a', 'b', 'c', 'return a + b + c;' ); /* 無名関数 */ d( 1, 2, 3 ) //=> 6`



変数
------------------------------------------------------------
JavaScriptでも変数を扱うことが可能です。

変数の宣言
```js
var name;
```

変数の初期化
```js
var name = "sugilog";
```

変数の宣言をした後の代入
```js
var name;
name = "sugilog";
```

少し堅苦しく感じるかもしれないですが、**変数をそのプログラム中で初めて扱うときは、必ず`var`を付ける。**ことを約束ごととして覚えておいてください。
理由は後ほど解説します。



演算子
----------------------------------------------------------
Rubyや他の言語とだいたい同じです。
なのでざっと紹介です。

### 算術演算子

 演算子       | 機能           | 例
--------------|----------------|------------------------------
 `+`          | 足し算         | `2 + 1; //=> 3`
 `-`          | 引き算         | `2 - 1; //=> 1`
 `*`          | 掛け算         | `2 * 3; //=> 6`
 `/`          | 割り算         | `3 / 2; //=> 1.5`
 `%`          | 余り           | `3 % 2; //=> 1`
              |                |
 `++`（前置） | インクリメント |
 `++`（後置） | インクリメント |
 `--`（前置） | デクリメント   |
 `--`（後置） | デクリメント   |
{: .table}

### インクリメントとデクリメント

前置と後置で結果が変わります。

```js
var i,
    j = 0;

i = 1 + ++j;
// i: 2
// j: 1
```
```js
var i,
    j = 0;

i = 1 + j++;
// i: 1
// j: 1
```

前置きの場合、その式が実行される前の段階でインクリメントされ、後置きの場合、その式が実行される後の段階でインクリメントされる、という意味合いです。


### 比較演算子

 演算子           | 機能           | 例
------------------|----------------|------------------------------
 `==`             | 同値           | `1 == '1' //=> true`
 `!=`             | 同値でない     | `1 != 2 //=> true`
 `===`            | 厳密同値       | `1 === '1' //=> false`
 `!==`            | 厳密同値でない | `1 !== '1' //=> true`
 `< , > , <=, >=` | 比較           | `1 < 2 //=> true`
                  |                |
 `&&`             | 論理積         | `true && true //=> true`
 `||`             | 論理和         | `true && false //=> true`
{: .table}

厳密かどうかは、JavaScriptのプログラミングをする上でとても大切な理解です。
では使う上での基準はと言われると、基本的に厳密な比較を行う、としておくことをおすすめします。

```js
var num_one = 1,
    str_one = '1';

console.log( '== : ' + ( num_one == str_one ) );
console.log( '===: ' + ( num_one === str_one ) );
console.log( '!= : ' + ( num_one != str_one ) );
console.log( '!==: ' + ( num_one !== str_one ) );
```


条件分岐
------------------------------------------------------------
大きく分けて2つ、if文とswitch文（rubyでいうとcase文）が存在します。

### if文
必ず、条件式はカッコで囲われている必要があります。

```js
var i = 1;

if ( i === 1 ) {
  console.log( "one" );
}
else {
  console.log( "not" );
}
```

複数条件を書くのであれば、

```js
var i = 1;

if ( i === 1 ) {
  console.log( "one" );
}
else if ( i === 2 ) {
  console.log( "two" );
}
else {
  console.log( "not" );
}
```


### switch文
switchとcase、defaultによって構成され、switchで提示した式の値がtrueになるcaseから処理が始まります。

```js
var i = 1;

switch ( i ) {
  case 1:
    console.log( "one" );
    break;
  case 2:
    console.log( "two" );
    break;
  default:
    console.log( "not" );
    break
}
```

それぞれのcaseの中身のあとにbreakというものがあるのがわかると思います。
これはそこで処理を止める、という意味です。
breakを書き忘れると悲惨です。

```js
var i = 2;

switch ( i ) {
  case 1:
    console.log( "one" );
  case 2:
    console.log( "two" );
  default:
    console.log( "not" );
}

// consoleには、two と not が表示される。
```

switchは、該当するcaseから処理が始まるだけで、止められなければ、下へ下へ、処理が進んでいくのです。
厳密には、if文のelse ifやelseと、switch文のcaseは意味が違うのです。

ただし、caseの特性を使うと以下のように条件を書くこともできます。

```js
var i = 2;

switch ( i ) {
  case 1:
    console.log( "one" );
    break;
  case 2:
  case 3:
  case 4:
    console.log( "over one" );
    break;
  default:
    console.log( "not" );
    break;
}

// iが2, 3, 4のいずれかの時、"over one"と表示される。
```


### 真偽値

他のプログラミング言語同様に trueが真、falseが偽であることは同じです。
その他、まとめてみます。

真となる値
: true, 1, -1, "0", "str", [], ...

偽となる値
: false, 0, null, undefined, ...

Rubyと異なるのは、0は偽であるということです。（Ruby以外の言語ではこの評価をする言語のほうが多いです。）


繰り返し処理
------------------------------------------------------------
for文とwhile文を紹介します。
どちらも書き方がいくつかあるのですが、代表的な書き方だけ、紹介します。

### for文

```js
for ( var i = 0; i < 10; i++ ) {
  console.log( i );
}
// 0から9が表示される。
```

forのあとに式を3つ渡すのがよく見る使われ方です。


### while文

```js
var i = 0;
while ( i < 10 ) {
  console.log( i );
  i++;
}
```

先程のfor文とほぼ同様のことをさせてみました。
どちらを使うかは、好みもありますので、どっちがいいよ、ということは無いです。




* * * *


Tips
------------------------------------------------------------

### 変数と初期化と代入の返り値
初期化時は、初期化する、ということが強いので、代入した値は返りません。
一方で、宣言済みの変数への代入は、代入した値が返ります。

```js
var i = 'test';
//=> undefined

i = 'test2';
//=> 'test2'
```



### while文のもっと実践的な使い方。

真偽値のまとめをしたときに0が偽であると説明しました。
これを使ってみます。

```js
var i = 10;
while ( i-- ) {
  console.log( i );
}
// 9から0までが順番に表示される。
// 0が表示した後に、条件に0が渡されて、自動的に繰り返しを終了する。
```

順番に気にしたいのであれば、繰り返し処理をする中でも特にシンプルに書ける書き方です。

